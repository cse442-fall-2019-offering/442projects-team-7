<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <link rel="stylesheet" href="custLookup.css">
        <title>Customer Lookup</title>
    </head>
    <body>
        <script src = "main.js"></script>
        <div id="title" class="centered">
            Customer Lookup
        </div>
        <div id="CIDInput">
            <input type="text" name="custInput" id="custInput" placeholder="Enter a CID, name, phone #, address...">
        </div>
        <div id="Table-Wrapper">
            <table id="Item-List-Panel">
                <thead id="Column-Headers">
                    <tr">
                        <th id="CID-Column">CID #</th>
                        <th id="Customer-Column">Customer Name</th>
                        <th id="Phone-Column">Phone #</th>
                        <th id="Email-Column">Email</th>
                        <th id="Address-Column">Address</th>
                    </tr>
                </thead>
                <tbody id="Table-Data">
                    <tr id="row_1" class = "tableEntryA">
                        <td class = "tableColumn1"></td>
                        <td class = "tableColumn2"><input id="row_1_name_input" class="input1" disabled="true"></td>
                        <td class = "tableColumn3"><input id="row_1_phone_input" class="input1" disabled="true"></td></td>
                        <td class = "tableColumn4"><input id="row_1_email_input" class="input1" disabled="true"></td></td>
                        <td class = "tableColumn5"><input id="row_1_address_input" class="input2" disabled="true"></td></td>
                    </tr>
                    <tr id="row_2" class = "tableEntryB">
                        <td class = "tableColumn1"></td>
                        <td class = "tableColumn2"><input id="row_2_name_input" class="input1" disabled="true"></td>
                        <td class = "tableColumn3"><input id="row_2_phone_input" class="input1" disabled="true"></td></td>
                        <td class = "tableColumn4"><input id="row_2_email_input" class="input1" disabled="true"></td></td>
                        <td class = "tableColumn5"><input id="row_2_address_input" class="input2" disabled="true"></td></td>
                    </tr>
                    <tr id="row_3" class = "tableEntryA">
                        <td class = "tableColumn1"></td>
                        <td class = "tableColumn2"><input id="row_3_name_input" class="input1" disabled="true"></td>
                        <td class = "tableColumn3"><input id="row_3_phone_input" class="input1" disabled="true"></td></td>
                        <td class = "tableColumn4"><input id="row_3_email_input" class="input1" disabled="true"></td></td>
                        <td class = "tableColumn5"><input id="row_3_address_input" class="input2" disabled="true"></td></td>
                    </tr>
                    <tr id="row_4" class = "tableEntryB">
                        <td class = "tableColumn1"></td>
                        <td class = "tableColumn2"><input id="row_4_name_input" class="input1" disabled="true"></td>
                        <td class = "tableColumn3"><input id="row_4_phone_input" class="input1" disabled="true"></td></td>
                        <td class = "tableColumn4"><input id="row_4_email_input" class="input1" disabled="true"></td></td>
                        <td class = "tableColumn5"><input id="row_4_address_input" class="input2" disabled="true"></td></td>
                    </tr>
                    <tr id="row_5" class = "tableEntryA">
                        <td class = "tableColumn1"></td>
                        <td class = "tableColumn2"><input id="row_5_name_input" class="input1" disabled="true"></td>
                        <td class = "tableColumn3"><input id="row_5_phone_input" class="input1" disabled="true"></td></td>
                        <td class = "tableColumn4"><input id="row_5_email_input" class="input1" disabled="true"></td></td>
                        <td class = "tableColumn5"><input id="row_5_address_input" class="input2" disabled="true"></td></td>
                    </tr>
                    <tr id="row_6" class = "tableEntryB">
                        <td class = "tableColumn1"></td>
                        <td class = "tableColumn2"><input id="row_6_name_input" class="input1" disabled="true"></td>
                        <td class = "tableColumn3"><input id="row_6_phone_input" class="input1" disabled="true"></td></td>
                        <td class = "tableColumn4"><input id="row_6_email_input" class="input1" disabled="true"></td></td>
                        <td class = "tableColumn5"><input id="row_6_address_input" class="input2" disabled="true"></td></td>
                    </tr>
                    <tr id="row_7" class = "tableEntryA">
                        <td class = "tableColumn1"></td>
                        <td class = "tableColumn2"><input id="row_7_name_input" class="input1" disabled="true"></td>
                        <td class = "tableColumn3"><input id="row_7_phone_input" class="input1" disabled="true"></td></td>
                        <td class = "tableColumn4"><input id="row_7_email_input" class="input1" disabled="true"></td></td>
                        <td class = "tableColumn5"><input id="row_7_address_input" class="input2" disabled="true"></td></td>
                    </tr>
                    <tr id="row_8" class = "tableEntryB">
                        <td class = "tableColumn1"></td>
                        <td class = "tableColumn2"><input id="row_8_name_input" class="input1" disabled="true"></td>
                        <td class = "tableColumn3"><input id="row_8_phone_input" class="input1" disabled="true"></td></td>
                        <td class = "tableColumn4"><input id="row_8_email_input" class="input1" disabled="true"></td></td>
                        <td class = "tableColumn5"><input id="row_8_address_input" class="input2" disabled="true"></td></td>
                    </tr>
                    <tr id="row_9" class = "tableEntryA">
                        <td class = "tableColumn1"></td>
                        <td class = "tableColumn2"><input id="row_9_name_input" class="input1" disabled="true"></td>
                        <td class = "tableColumn3"><input id="row_9_phone_input" class="input1" disabled="true"></td></td>
                        <td class = "tableColumn4"><input id="row_9_email_input" class="input1" disabled="true"></td></td>
                        <td class = "tableColumn5"><input id="row_9_address_input" class="input2" disabled="true"></td></td>
                    </tr>
                    <tr id="row_10" class = "tableEntryB">
                        <td class = "tableColumn1"></td>
                        <td class = "tableColumn2"><input id="row_10_name_input" class="input1" disabled="true"></td>
                        <td class = "tableColumn3"><input id="row_10_phone_input" class="input1" disabled="true"></td></td>
                        <td class = "tableColumn4"><input id="row_10_email_input" class="input1" disabled="true"></td></td>
                        <td class = "tableColumn5"><input id="row_10_address_input" class="input2" disabled="true"></td></td>
                    </tr>
                    <tr id="row_11" class = "tableEntryA">
                        <td class = "tableColumn1"></td>
                        <td class = "tableColumn2"><input id="row_11_name_input" class="input1" disabled="true"></td>
                        <td class = "tableColumn3"><input id="row_11_phone_input" class="input1" disabled="true"></td></td>
                        <td class = "tableColumn4"><input id="row_11_email_input" class="input1" disabled="true"></td></td>
                        <td class = "tableColumn5"><input id="row_11_address_input" class="input2" disabled="true"></td></td>
                    </tr>
                    <tr id="row_12" class = "tableEntryB">
                        <td class = "tableColumn1"></td>
                        <td class = "tableColumn2"><input id="row_12_name_input" class="input1" disabled="true"></td>
                        <td class = "tableColumn3"><input id="row_12_phone_input" class="input1" disabled="true"></td></td>
                        <td class = "tableColumn4"><input id="row_12_email_input" class="input1" disabled="true"></td></td>
                        <td class = "tableColumn5"><input id="row_12_address_input" class="input2" disabled="true"></td></td>
                    </tr>
                    <tr id="row_13" class = "tableEntryA">
                        <td class = "tableColumn1"></td>
                        <td class = "tableColumn2"><input id="row_13_name_input" class="input1" disabled="true"></td>
                        <td class = "tableColumn3"><input id="row_13_phone_input" class="input1" disabled="true"></td></td>
                        <td class = "tableColumn4"><input id="row_13_email_input" class="input1" disabled="true"></td></td>
                        <td class = "tableColumn5"><input id="row_13_address_input" class="input2" disabled="true"></td></td>
                    </tr>
                    <tr id="row_14" class = "tableEntryB">
                        <td class = "tableColumn1"></td>
                        <td class = "tableColumn2"><input id="row_14_name_input" class="input1" disabled="true"></td>
                        <td class = "tableColumn3"><input id="row_14_phone_input" class="input1" disabled="true"></td></td>
                        <td class = "tableColumn4"><input id="row_14_email_input" class="input1" disabled="true"></td></td>
                        <td class = "tableColumn5"><input id="row_14_address_input" class="input2" disabled="true"></td></td>
                    </tr>
                    <tr id="row_15" class = "tableEntryA">
                        <td class = "tableColumn1"></td>
                        <td class = "tableColumn2"><input id="row_15_name_input" class="input1" disabled="true"></td>
                        <td class = "tableColumn3"><input id="row_15_phone_input" class="input1" disabled="true"></td></td>
                        <td class = "tableColumn4"><input id="row_15_email_input" class="input1" disabled="true"></td></td>
                        <td class = "tableColumn5"><input id="row_15_address_input" class="input2" disabled="true"></td></td>
                    </tr>
                </tbody>
            </table>
            <script type="text/javascript">
                document.getElementById("Table-Data").addEventListener('click', (e) => {
                    var rowID = e.target.closest('tr').id;
                    var row = document.getElementById(rowID);
                    console.log(e.target.closest('tr').id);
                    console.log(row);

                    if (row.classList.contains('selectedRow')) {
                        //row.classList.remove('selectedRow');
                        if (row.cells[1].children[0] !== document.activeElement && row.cells[2].children[0] !== document.activeElement 
                        		&& row.cells[3].children[0] !== document.activeElement && row.cells[4].children[0] !== document.activeElement) {
                        	row.classList.remove('selectedRow');
                        	row.cells[1].children[0].disabled = true;
                        	row.cells[2].children[0].disabled = true;
                        	row.cells[3].children[0].disabled = true;
                        	row.cells[4].children[0].disabled = true;
                        	//console.log('already selected');
                        }
                    } else {
                        // Check all row classes for selected
                        //console.log("does not contain selected!");
                        var prevSelected = false;
                        var tableData = document.getElementById("Table-Data");
                        for (var rowIndex = 0; rowIndex < tableData.rows.length; rowIndex++) {
                            if (tableData.rows[rowIndex].classList.contains('selectedRow')) {
                                prevSelected = true;
                                //console.log("prevSelected = true");
                            }
                        }

                        if (!prevSelected) {
                            row.classList.add('selectedRow');
                            // Enable customer inputs
		                    if (row.cells[1].innerHTML != '') {
		                        row.cells[1].children[0].disabled = false;
		                        row.cells[2].children[0].disabled = false;
		                        row.cells[3].children[0].disabled = false;
		                        row.cells[4].children[0].disabled = false;
		                    }
                        }
                    }
                }); 
            </script>
        </div>
        <div id="Button-Array">
        	<input class="tableButton" type = "button" onclick="refreshCustomerTable();" value = "Refresh Table">
            <input class="tableButton" type = "button" onclick="selectCustomer();" value = "Select">
            <input class="tableButton" type = "button" value = "Add">
            <input class="tableButton" type = "button" onclick="editCustomer();" value = "Edit">
            <input class="tableButton" type = "button" value = "Delete">
            <script src="../main.js"></script>
        </div>
    </body>
</html>